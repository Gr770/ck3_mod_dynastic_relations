dr_dynastic_relation_character_scriped_gui = {
	scope = character

	is_shown = {

        dr_can_dynastic_relation_be_established_betwen_characters = {
            CHARACTER_A = this
            CHARACTER_B = scope:target
        }

	}

	effect = {

        this = {
            save_scope_as = source
        }

        dr_save_dynastic_relation_between_dynasties_in_scope = {
            DYNASTY_A = scope:source.dynasty
            DYNASTY_B = scope:target.dynasty
            SCOPE_NAME = dynastic_relation_val
        }

        set_variable = {
            name = dynastic_relation_val
            value = scope:dynastic_relation_val
        }

	}
}


dr_dynastic_relation_list_scriped_gui = {
    scope = dynasty

    is_shown = {
        always = yes
    }

    effect = {

        clear_global_variable_list = dr_dynasty_relations_sorted

        this = {
            save_scope_as = current_dynasty
        }

        scope:player = {
            set_variable = {
                name = current_dynasty
                value = scope:current_dynasty
            }
        }

        ordered_in_list = { 
            variable = dr_dynasty_relations
            max = 99
            check_range_bounds = no
            order_by = {
                value = var:value
                if = {
                    limit = { has_global_variable = dr_dynasty_list_sort_by_ascending }
                    multiply = -1
                }
            }

            if = {
                limit = { 
                    OR = {
                        var:value > 0
                        var:value < 0
                    }
                }

                add_to_global_variable_list = { name = dr_dynasty_relations_sorted target = this}
            }
        }
    }

}

dr_dynastic_relation_list_scriped_change_sort_order_gui = {
    scope = character

    effect = {
        if = {
            limit = { has_global_variable = dr_dynasty_list_sort_by_ascending }
            remove_global_variable = dr_dynasty_list_sort_by_ascending
        }
        else = {
            set_global_variable = dr_dynasty_list_sort_by_ascending
        }

    }
}

